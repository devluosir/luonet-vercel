const fs = require('fs');
const path = require('path');

const resources = [
  {
    name: 'notoSansSCRegular',
    path: path.join(__dirname, '../public/fonts/NotoSansSC-Regular.ttf'),
  },
  {
    name: 'notoSansSCBold',
    path: path.join(__dirname, '../public/fonts/NotoSansSC-Bold.ttf'),
  },
  {
    name: 'headerImage',
    path: path.join(__dirname, '../public/images/header-bilingual.png'),
  },
  {
    name: 'shanghaiStamp',
    path: path.join(__dirname, '../public/images/stamp-shanghai.png'),
  },
  {
    name: 'hongkongStamp',
    path: path.join(__dirname, '../public/images/stamp-hongkong.png'),
  },
];

let output = '// This file is auto-generated by scripts/embed-resources.js\n';
output += 'export const embeddedResources = {\n';

resources.forEach(resource => {
  try {
    const fileBuffer = fs.readFileSync(resource.path);
    const base64String = fileBuffer.toString('base64');
    output += `  ${resource.name}: '${base64String}',\n`;
    console.log(`Embedded ${resource.name} successfully.`);
  } catch (error) {
    console.error(`Error processing ${resource.path}:`, error);
    // Add a placeholder to avoid breaking the build
    output += `  ${resource.name}: '',\n`;
  }
});

output += '};\n';

const outputPath = path.join(__dirname, '../src/lib/embedded-resources.ts');

try {
  fs.writeFileSync(outputPath, output);
  console.log(`Successfully wrote embedded resources to ${outputPath}`);
} catch (error) {
  console.error(`Error writing to ${outputPath}:`, error);
  process.exit(1);
} 