# LC APP - 商业文档管理系统

一个用于处理报价单、销售确认单和发票等商业文档的生成和管理系统。

## 功能特性

### 1. 报价单和订单确认书生成
- 支持报价单和订单确认书的快速生成
- 可自定义客户信息、商品明细、备注等内容
- 支持多币种（USD/CNY）
- 提供专业的 PDF 导出功能
- 支持本地历史记录保存和管理

### 2. 采购订单管理
- 生成给供应商的采购订单
- 支持供应商信息管理
- 可自定义采购商品明细
- 提供专业的 PDF 导出功能
- 支持采购历史记录管理
- 支持编辑现有采购订单
- 支持复制采购订单创建新订单

### 3. AI 邮件助手
- 智能生成商务邮件
- 支持中英文双语邮件
- 多种邮件语气风格可选
- 快速邮件回复建议

### 4. 用户管理
- 多用户支持
- 基于角色的权限控制
- 管理员后台管理

### 5. 系统特性
- 支持深色/浅色主题
- 响应式设计，支持移动端访问
- 本地数据存储，保护隐私

## 技术栈

- **前端框架**: Next.js 14
- **UI 框架**: TailwindCSS
- **状态管理**: React Hooks
- **认证**: NextAuth.js
- **数据库**: Prisma + PostgreSQL
- **AI 集成**: DeepSeek API
- **PDF 生成**: jsPDF

## 开发环境设置

1. 克隆项目
```bash
git clone [repository-url]
cd mluonet
```

2. 安装依赖
```bash
npm install
```

3. 环境变量配置
创建 `.env.local` 文件并添加以下配置：
```env
DEEPSEEK_API_KEY=your_api_key
DATABASE_URL=your_database_url
NEXTAUTH_SECRET=your_nextauth_secret
```

4. 启动开发服务器
```bash
npm run dev
```

## 部署

1. 构建项目
```bash
npm run build
```

2. 启动生产服务器
```bash
npm start
```

## 数据存储说明

- 用户数据存储在 PostgreSQL 数据库中
- 报价历史记录使用浏览器的 localStorage 存储
- AI 生成的内容不会被永久存储

## 注意事项

1. localStorage 存储限制
   - 浏览器的 localStorage 通常限制在 5-10MB
   - 建议定期导出重要的报价历史记录
   - 清除浏览器数据会导致历史记录丢失

2. AI 功能使用
   - 需要配置有效的 DeepSeek API Key
   - API 调用有频率限制
   - 生成的内容建议人工审核

## 更新日志

### V1.2.1 - 搜索结果显示优化
- **智能搜索徽章**: 在搜索框中输入字符后，每个tab图标上会显示红色徽章，实时显示该类型下的搜索结果数量
- **过滤条件响应**: 不仅搜索条件，所有过滤条件（日期范围、金额范围等）都会触发红色徽章显示
- **实时更新**: 徽章数量会随着搜索和过滤条件的变化实时更新
- **视觉区分**: 有过滤条件时显示红色徽章，无过滤条件时显示对应tab的默认颜色徽章

### V1.2.0 - 历史管理功能完善
- **统一历史页面布局**: 所有历史页面（报价单、订单确认书、发票、采购单）现在采用统一的现代化布局
- **增强排序功能**: 为所有历史页面添加了表头排序功能，支持按客户名称、单号、金额、创建时间等字段排序
- **完善操作功能**: 每个历史记录都支持预览、编辑、复制、删除等完整操作
- **批量操作支持**: 支持批量选择和批量删除操作
- **高级过滤功能**: 添加了日期范围过滤和金额范围过滤功能
- **智能搜索**: 支持按客户名称、单号、合同号等多字段搜索
- **金额统计**: 每个历史页面底部显示按币种分类的金额统计
- **响应式设计**: 优化了移动端显示效果，隐藏部分列以适配小屏幕
- **视觉优化**: 为不同类型的历史记录使用不同的主题色彩（蓝色-报价单、绿色-确认书、紫色-发票、橙色-采购单）
- **布局优化**: 将搜索和过滤功能移至顶部header区域，提升用户体验
- **Tab计数显示**: 在每个tab标题上显示搜索结果数量，方便用户了解各类型记录的数量

### V1.1.1
- 移除 Cloudflare D1 集成
- 改用 localStorage 存储报价历史
- 优化用户界面响应速度
- 修复已知问题

## 贡献指南

欢迎提交 Issue 和 Pull Request 来帮助改进项目。

## 许可证

[MIT License](LICENSE)
