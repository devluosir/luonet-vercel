# MLuoNet - 专业的报价和订单确认系统

## 项目概述

MLuoNet是一个基于Next.js构建的专业报价和订单确认系统，提供完整的业务流程管理功能。

## 最新更新

### 字体加载优化 (2024-01-XX)

#### 性能优化
1. **按需字体加载**：
   - 将中文字体从全局加载中提取出来
   - 创建专门的字体加载工具 `src/utils/fontLoader.ts`
   - 仅在PDF生成页面加载字体文件

2. **PDF页面优化**：
   - 为所有PDF生成页面添加专门的字体CSS文件
   - 包括：quotation、invoice、packing、purchase、history页面
   - 字体文件仅在需要时加载，提高页面加载速度

3. **代码重构**：
   - 统一所有PDF生成器的字体加载逻辑
   - 创建可复用的字体加载函数
   - 减少代码重复，提高维护性

#### 技术实现
- 创建 `src/utils/fontLoader.ts` 字体加载工具
- 创建 `src/app/pdf-fonts.css` 字体样式文件
- 修改所有PDF生成器使用统一的字体加载方法
- 在相关页面中导入字体CSS文件

### 用户管理页面布局优化 (2024-01-XX)

#### 功能改进
1. **布局重新设计**：
   - 将编辑按钮移至用户头像和基本信息的右侧
   - 注册时间和最后登录时间显示在同一行
   - 在状态行增加已开通模块的小图标显示

2. **模块权限可视化**：
   - 在用户状态旁边显示已开通的模块图标
   - 支持报价、箱单、发票、采购、日期等模块的权限显示
   - 图标采用不同颜色区分不同模块

3. **响应式设计优化**：
   - 在小屏幕上注册时间和登录时间自动换行
   - 保持卡片布局的紧凑性和可读性

#### 技术实现
- 更新了User接口以包含权限信息
- 修改了API端点以返回用户权限数据
- 添加了模块定义和图标映射
- 优化了CSS布局和响应式设计

## 主要功能

### 用户管理
- 用户创建、编辑、删除
- 权限管理和模块分配
- 用户状态监控
- 登录历史记录

### 业务模块
- **报价管理**：创建和管理客户报价
- **箱单发票**：生成装箱单和发票
- **财务发票**：财务发票管理
- **采购订单**：采购订单处理
- **日期工具**：日期计算工具

### 系统特性
- 响应式设计，支持移动端
- 深色模式支持
- 权限控制系统
- 实时数据同步

## 技术栈

- **前端框架**：Next.js 14 (App Router)
- **样式**：Tailwind CSS
- **认证**：NextAuth.js
- **数据库**：Cloudflare D1
- **部署**：Vercel

## 开发环境设置

```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 构建生产版本
npm run build
```

## 项目结构

```
src/
├── app/                    # Next.js App Router页面
│   ├── admin/             # 管理员页面
│   ├── dashboard/         # 仪表板
│   └── api/              # API路由
├── components/            # React组件
├── lib/                  # 工具库和配置
├── types/                # TypeScript类型定义
└── utils/                # 工具函数
```

## 部署

项目已配置为在Vercel上自动部署。主要配置包括：

- `vercel.json`：Vercel部署配置
- `wrangler.toml`：Cloudflare Workers配置
- 环境变量配置

## 贡献指南

1. Fork项目
2. 创建功能分支
3. 提交更改
4. 推送到分支
5. 创建Pull Request

## 许可证

本项目采用MIT许可证。


8.2 优化版需再调试